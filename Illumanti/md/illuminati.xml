<?xml version="1.0" encoding="utf-8" ?>
<mdscript name="Illuminati" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="D:/x4_extract_2.5/libraries/md.xsd">
    <cues>
        <!-- Tell the lua side that the game loaded. -->
        <cue name="Reload_Listener" instantiate="true" namespace="this">
            <conditions>
                <check_any>
                    <event_game_loaded/>
                    <event_game_started/>
                </check_any>
            </conditions>
            <actions>
                <raise_lua_event name="'Lua_Loader.Signal'"/>
            </actions>
        </cue>
        <cue name="Register_Options_Menu" instantiate="true" namespace="this">
            <conditions>
                <event_cue_signalled cue="md.Simple_Menu_API.Reloaded"/>
            </conditions>
            <actions>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'illuminati_menu',
                    $columns = 2, 
                    $title = 'Illuminati',
                    $onOpen = Main_Menu
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_argon_menu',
                    $columns = 2, 
                    $title = 'Argon Relations',
                    $private = 1,
                    $onOpen = Do_argon
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_hop_menu',
                    $columns = 2, 
                    $title = 'HOP Relations',
                    $private = 1,
                    $onOpen = Do_hop
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_anti_menu',
                    $columns = 2, 
                    $title = 'Antigone Relations',
                    $private = 1,
                    $onOpen = Do_anti
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_alliance_menu',
                    $columns = 2, 
                    $title = 'Alliance Relations',
                    $private = 1,
                    $onOpen = Do_alliance
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_hatikvah_menu',
                    $columns = 2, 
                    $title = 'Hatikvah Relations',
                    $private = 1,
                    $onOpen = Do_hatikvah
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_ministry_menu',
                    $columns = 2, 
                    $title = 'Ministry Relations',
                    $private = 1,
                    $onOpen = Do_ministry
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_paranid_menu',
                    $columns = 2, 
                    $title = 'Paranid Relations',
                    $private = 1,
                    $onOpen = Do_paranid
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_teladi_menu',
                    $columns = 2, 
                    $title = 'Teladi Relations',
                    $private = 1,
                    $onOpen = Do_teladi
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_scale_menu',
                    $columns = 2, 
                    $title = 'Scale Plate Relations',
                    $private = 1,
                    $onOpen = Do_scale
                    ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
                param = "table[
                    $id = 'do_you_menu',
                    $columns = 2, 
                    $title = 'Your Relations',
                    $private = 1,
                    $onOpen = Do_you
                    ]"/>

            </actions>
        </cue>
        <cue name="Main_Menu" instantiate="true" namespace="this">
            <conditions>
                <check_any>
                    <event_cue_signalled />
                </check_any>
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Return = Do_argon,
                                $Name = 'Argon',
                                $Menu = 'do_argon_menu',
                                $F1 = faction.argon
                                ],
                            {2} = table [
                                $Return = Do_hop,
                                $Name = 'HOP',
                                $Menu = 'do_hop_menu',
                                $F1 = faction.holyorder
                                ],
                            {3} = table [
                                $Return = Do_anti,
                                $Name = 'Antigone',
                                $Menu = 'do_anti_menu',
                                $F1 = faction.antigone
                                ],
                            {4} = table [
                                $Return = Do_alliance,
                                $Name = 'Alliance',
                                $Menu = 'do_alliance_menu',
                                $F1 = faction.alliance
                                ],
                            {5} = table [
                                $Return = Do_hatikvah,
                                $Name = 'Hatikvah',
                                $Menu = 'do_hatikvah_menu',
                                $F1 = faction.hatikvah
                                ],
                            {6} = table [
                                $Return = Do_ministry,
                                $Name = 'Ministry',
                                $Menu = 'do_ministry_menu',
                                $F1 = faction.ministry
                                ],
                            {7} = table [
                                $Return = Do_paranid,
                                $Name = 'Paranid',
                                $Menu = 'do_paranid_menu',
                                $F1 = faction.paranid
                                ],
                            {8} = table [
                                $Return = Do_teladi,
                                $Name = 'Teladi',
                                $Menu = 'do_teladi_menu',
                                $F1 = faction.teladi
                                ],
                            {9} = table [
                                $Return = Do_scale,
                                $Name = 'Scale Plate',
                                $Menu = 'do_scale_menu',
                                $F1 = faction.scaleplate
                                ],
                            {10} = table [
                                $Return = Do_you,
                                $Name = 'You',
                                $Menu = 'do_you_menu',
                                $F1 = faction.player
                                ],
                        ]" />
            </actions>
            <cues>
                <cue name="Main_Menu_Call_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Illuminati'" />
                    <param name="MenuType" value="'main'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="ButtonText" value="'Open Menu'" />
                </cue>
            </cues>
        </cue>
        <cue name="Do_argon" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],    
                            {2} = table [
                                $Name = 'HOP',
                                $F2 = faction.holyorder
                                ],
                            {3} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],
                            {4} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],  
                            {5} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                            
                        ]" />

            </actions>
            <cues>
                <cue name="Argon_Relations_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Argon Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.argon" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>
        <cue name="Do_hop" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],
                            {4} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],  
                            {5} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                             
                        ]" />

            </actions>
            <cues>
                <cue name="HOP_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Holy Order Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.holyorder" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_anti" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],
                            {4} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],  
                            {5} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                           
                        ]" />

            </actions>
            <cues>
                <cue name="Anti_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Antigone Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.antigone" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_alliance" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],  
                            {5} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                              
                        ]" />

            </actions>
            <cues>
                <cue name="Alliance_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Alliance Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.alliance" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>


        <cue name="Do_hatikvah" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                            
                        ]" />

            </actions>
            <cues>
                <cue name="hatikvah_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Hatikvah Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.hatikvah" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_ministry" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],
                            {6} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                              
                        ]" />

            </actions>
            <cues>
                <cue name="ministry_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Ministry Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.ministry" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_paranid" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],
                            {6} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {7} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                            
                        ]" />

            </actions>
            <cues>
                <cue name="paranid_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Paranid Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.paranid" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_teladi" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],
                            {6} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {7} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],                             
                        ]" />

            </actions>
            <cues>
                <cue name="teladi_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Teladi Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.teladi" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_you" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],
                            {6} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {7} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],  
                            {8} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],                            
                        ]" />

            </actions>
            <cues>
                <cue name="player_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Player Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.player" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>

        <cue name="Do_scale" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$ObjectTable" exact="table[
                            {1} = table [
                                $Name = 'Holy Order',
                                $F2 = faction.holyorder
                                ],    
                            {2} = table [
                                $Name = 'Argon',
                                $F2 = faction.argon
                                ],
                            {3} = table [
                                $Name = 'Antigone',
                                $F2 = faction.antigone
                                ],
                            {4} = table [
                                $Name = 'Alliance',
                                $F2 = faction.alliance
                                ],  
                            {5} = table [
                                $Name = 'Hatikvah',
                                $F2 = faction.hatikvah
                                ],
                            {6} = table [
                                $Name = 'Ministry',
                                $F2 = faction.ministry
                                ],
                            {7} = table [
                                $Name = 'Paranid',
                                $F2 = faction.paranid
                                ],  
                            {8} = table [
                                $Name = 'Teladi',
                                $F2 = faction.teladi
                                ],  
                            {9} = table [
                                $Name = 'You',
                                $F2 = faction.player
                                ],                            
                        ]" />

            </actions>
            <cues>
                <cue name="scaleplate_Menu_LIB" ref="md.Illuminati.Menu_LIB">
                    <param name="Title" value="'Scale Plate Relations'" />
                    <param name="ObjectTable" value="$ObjectTable" />
                    <param name="MenuType" value="'position'" />
                    <param name="F1" value="faction.scaleplate" />
                    <param name="Height" value="600" />
                    <param name="Width" value="600" />
                </cue>
            </cues>
        </cue>


        <library name="Menu_LIB">
            <params>
                <param name="Title" default="'Menu'" />
                <param name="List" default="'none'" />
                <param name="Text" default="'Default'" />
                <param name="ObjectTable" default="'none'" />
                <param name="MenuType" default="'none'" />
                <param name="ReturnCue" default="Main_Menu" />
                <param name="ButtonText" default="'button'" />
                <param name="F1" default="Main_Menu" />
                <param name="Object" default="'none'" />
                <param name="Col" default="2" />
                <param name="Height" default="800" />
                <param name="Width" default="1000" />
            </params>
            <cues>
                <cue name="DrawMenu">
                    <actions>
                        <include_actions ref="StartMenu" />
                        <do_if value="$MenuType == 'main'">
                            <do_all exact="$ObjectTable.keys.count" counter="$i">
                                <!-- <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" /> -->
                                <set_value name="$Text" exact="$ObjectTable.{$i}.$Name" />
                                <set_value name="$Menu" exact="$ObjectTable.{$i}.$Menu" />
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Submenu_Link"
                                    param = "table[
                                    $id  = $Menu,
                                    $text   = $Text,
                                    ]"/>
                            </do_all>
                        </do_if>
                        <do_if value="$MenuType == 'list'">
                            <do_all exact="$List.count" counter="$i">
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="' Macro: %s\n Name: %s'.[$List.{$i},$List.{$i}.name]" />
                                <set_value name="$Object" exact="$List.{$i}" />
                                <include_actions ref="Label" />
                                <include_actions ref="Button" />
                            </do_all>
                        </do_if>
                        <do_if value="$MenuType == 'table1'">
                            <set_value name="$Keys" exact="$ObjectTable.keys.list" />
                            <do_all exact="$Keys.count" counter="$i">
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="if @$Keys.{$i}.knownname then @$Keys.{$i}.knownname else @$Keys.{$i}.name" />
                                <include_actions ref="TitleLabel" />
                                <set_value name="$Print" exact="$ObjectTable.{$Keys.{$i}}.$Objects" />
                                <do_all exact="$Print.count" counter="$j">
                                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                    <set_value name="$Text" exact="if $Print.{$j}.knownname then $Print.{$j}.knownname else $Print" />
                                    <set_value name="$Object" exact="$Print.{$j}" />
                                    <include_actions ref="Label" />
                                    <include_actions ref="Button" />
                                </do_all>
                            </do_all>
                        </do_if>
                        <do_if value="$MenuType == 'table2'">
                            <set_value name="$Keys" exact="$ObjectTable.keys.list" />
                            <do_all exact="$Keys.count" counter="$i">
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="if @$Keys.{$i}.knownname then @$Keys.{$i}.knownname else @$Keys.{$i}.name" />
                                <include_actions ref="TitleLabel" />
                                <set_value name="$Ships" exact="$ObjectTable.{$Keys.{$i}}.$Ships.count" />
                                <set_value name="$Stations" exact="$ObjectTable.{$Keys.{$i}}.$Stations.count" />
                                <set_value name="$Sectors" exact="$ObjectTable.{$Keys.{$i}}.$Sectors.count" />
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="'Ships: %s Stations: %s Sectors: %s'.[$Ships  + ' ',$Stations + ' ',$Sectors + ' ']" />
                                <include_actions ref="Label" />
                                <remove_value name="$ShipCount" />
                                <remove_value name="$StationCount" />
                                <remove_value name="$SectorOwned" />
                            </do_all>
                        </do_if>
                        <do_if value="$MenuType == 'table3'">
                            <set_value name="$Keys" exact="$ObjectTable.keys.list" />
                            <do_all exact="$Keys.count" counter="$i">
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="@$Keys.{$i} + ' '" />
                                <include_actions ref="Label" />
                                <set_value name="$Print" exact="$ObjectTable.{$Keys.{$i}}.$Objects" />
                                <do_all exact="$Print.count" counter="$j">
                                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                    <set_value name="$Text" exact="$Print.{$j} + ' '" />
                                    <set_value name="$Object" exact="$Print.{$j}" />
                                    <include_actions ref="Label" />
                                    <include_actions ref="Button" />
                                </do_all>
                            </do_all>
                        </do_if>
                        <do_if value="$MenuType == 'position'">
                            <do_all exact="$ObjectTable.keys.count" counter="$i">
                                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                                <set_value name="$Text" exact="$ObjectTable.{$i}.$Name" />
                                <set_value name="$F2" exact="$ObjectTable.{$i}.$F2" />
                                <include_actions ref="Label" />
                                <include_actions ref="Button" />
                            </do_all>
                        </do_if>
                    </actions>
                </cue>
            </cues>
        </library>



        <library name="StartMenu">
            <actions>
                <!-- <signal_cue_instantly cue="md.Simple_Menu_API.Create_Menu" param="table[
                                        $columns = $Col, 
                                        $title = $Title,
                                        $height = $Height,
                                        $width = $Width,
                                        ]" /> 
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[ $col=1, 
                                        $text = 'Return To Main Menu',
                                        ]" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Button" param="table[ $col=2, $text=table[$text='Select', $color='Helper.color.brightyellow'], $onClick= md.Illuminati.Main_Menu,
                                        ]" /> -->

            </actions>
        </library>
        <library name="Button">
            <actions>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Button" param="table[ $col=2, $text=table[$text='Enemies', $color='Helper.color.red'], $onClick= md.Illuminati.Do_influence,
                                        $echo = [ $F1, $F2, -1],
                                        ]" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Button" param="table[ $col=2, $text=table[$text='Neutral', $color='Helper.color.white'], $onClick= md.Illuminati.Do_influence,
                                        $echo = [ $F1, $F2, 0],
                                        ]" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Button" param="table[ $col=2, $text=table[$text='Allies', $color='Helper.color.brightyellow'], $onClick= md.Illuminati.Do_influence,
                                        $echo = [ $F1, $F2, 1],
                                        ]" />
            </actions>
        </library>
        <library name="Label">
            <actions>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[ $col=1,                                        
                                        $text = $Text, $color=table[ $r = 200, $g = 200, $b = 200, $a = 100 ],
                                        ]" />
            </actions>
        </library>
        <library name="TitleLabel">
            <actions>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[ $col=1,                                         
                                        $text = $Text,
                                        $titleColor = 'Helper.color.brightyellow', $color=table[ $r = 200, $g = 200, $b = 200, $a = 100 ],
                                        ]" />
            </actions>
        </library>

        <cue name="Do_influence" instantiate="true">
            <conditions>
                <event_cue_signalled />
            </conditions>
            <actions>
                <set_value name="$f1" exact="event.param.$echo.{1}" />
                <set_value name="$f2" exact="event.param.$echo.{2}" />
                <set_value name="$rel" exact="event.param.$echo.{3}" />

                <set_faction_known faction="$f1" known="true" />
                <set_faction_known faction="$f2" known="true" />
                <set_faction_relation_locked faction="$f1" locked="false" />
                <set_faction_relation_locked faction="$f2" locked="false" />

                <set_faction_relation faction="$f1" otherfaction="$f2" value="$rel"/>
                <set_faction_relation faction="$f2" otherfaction="$f1" value="$rel"/>

                <do_if value="$rel == -1">
                    <set_faction_mood faction="$f1" type="aggression" level="moodlevel.veryhigh"/>
                    <set_faction_mood faction="$f2" type="aggression" level="moodlevel.veryhigh"/>
                </do_if>

                <show_notification text="'Influenced ' + $f1 + ' and ' + $f2" />
            </actions>
        </cue>
    </cues>
</mdscript>